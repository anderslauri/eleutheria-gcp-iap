@go.Package { name = "github.com/anderslauri/open-iap/gen" }
module ApplicationConfig

import "package://pkg.pkl-lang.org/pkl-go/pkl.golang@0.5.3#/go.pkl"

typealias LogLevel = "INFO"|"WARNING"|"DEBUG"|"ERROR"|"TRACE"
typealias Header = String(!isEmpty)
typealias Interval = Duration(this > 60.s)

Host: String(!isEmpty) = "0.0.0.0"
Port: UInt16(this > 0) = 8080
Leeway: Duration(this < 10.min) = 1.min

jwkCache: Cache
jwtCache: Cache
googleCerts: GoogleCerts
headerMapping: HeaderMapping
iamPolicy: IamPolicy
logger: Logger
tls: TLS

class IamPolicy {
  refreshInterval: Interval
}

class GoogleCerts {
  refreshInterval: Interval
}

class Cache {
  cleaner: Interval
}

class HeaderMapping {
  url: Header
}

class Logger {
  logLevel: LogLevel
  reportCaller: Boolean
}

class TLS {
 keyFile: String
 certFile: String
}